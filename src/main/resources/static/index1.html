<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发送POST请求示例</title>
</head>
<body>
<form id="myForm">
    <input type="text" name="id" placeholder="用户id">
    <input type="text" name="message" placeholder="内容">
    <button type="button" onclick="sendPostRequest()">提交</button>
</form>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var socket = new WebSocket("ws://localhost:8080/ws/1");

        socket.onmessage = function(event) {
            console.log("收到服务器消息： " + event.data);
        };

        document.getElementById("sendButton").addEventListener("click", function() {
            var message = document.getElementById("messageInput").value;
            socket.send(message);
        });
    });
    function sendPostRequest() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:8080/member/webSocket";
        var formData = new FormData(document.getElementById("myForm"));
        xhr.open("POST", url, true);
        xhr.setRequestHeader('Access-Control-Allow-Origin', 'http://localhost:63342');
        xhr.onreadystatechange = function() {
            // xhr.setRequestHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');
            // if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText);
            // }
        };
        xhr.send(formData);
    }
</script>
</body>
</html>
